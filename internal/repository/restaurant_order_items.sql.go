// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: restaurant_order_items.sql

package repository

import (
	"context"

	"github.com/jackc/pgx/v5/pgtype"
)

const createRestaurantOrderItem = `-- name: CreateRestaurantOrderItem :one
INSERT INTO restaurant_order_items (
    order_id, menu_item_id, quantity, unit_price, modifiers_snapshot, modifiers_total, discount_amount, tax_amount, subtotal, line_number, notes, status, metadata
) VALUES (
    $1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13
)
RETURNING id, order_id, menu_item_id, quantity, unit_price, modifiers_snapshot, modifiers_total, discount_amount, tax_amount, subtotal, line_number, notes, status, metadata, created_at, updated_at
`

type CreateRestaurantOrderItemParams struct {
	OrderID           int32          `json:"order_id"`
	MenuItemID        int32          `json:"menu_item_id"`
	Quantity          pgtype.Numeric `json:"quantity"`
	UnitPrice         pgtype.Numeric `json:"unit_price"`
	ModifiersSnapshot []byte         `json:"modifiers_snapshot"`
	ModifiersTotal    pgtype.Numeric `json:"modifiers_total"`
	DiscountAmount    pgtype.Numeric `json:"discount_amount"`
	TaxAmount         pgtype.Numeric `json:"tax_amount"`
	Subtotal          pgtype.Numeric `json:"subtotal"`
	LineNumber        pgtype.Int4    `json:"line_number"`
	Notes             pgtype.Text    `json:"notes"`
	Status            pgtype.Text    `json:"status"`
	Metadata          []byte         `json:"metadata"`
}

func (q *Queries) CreateRestaurantOrderItem(ctx context.Context, arg CreateRestaurantOrderItemParams) (RestaurantOrderItem, error) {
	row := q.db.QueryRow(ctx, createRestaurantOrderItem,
		arg.OrderID,
		arg.MenuItemID,
		arg.Quantity,
		arg.UnitPrice,
		arg.ModifiersSnapshot,
		arg.ModifiersTotal,
		arg.DiscountAmount,
		arg.TaxAmount,
		arg.Subtotal,
		arg.LineNumber,
		arg.Notes,
		arg.Status,
		arg.Metadata,
	)
	var i RestaurantOrderItem
	err := row.Scan(
		&i.ID,
		&i.OrderID,
		&i.MenuItemID,
		&i.Quantity,
		&i.UnitPrice,
		&i.ModifiersSnapshot,
		&i.ModifiersTotal,
		&i.DiscountAmount,
		&i.TaxAmount,
		&i.Subtotal,
		&i.LineNumber,
		&i.Notes,
		&i.Status,
		&i.Metadata,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const deleteRestaurantOrderItem = `-- name: DeleteRestaurantOrderItem :exec
DELETE FROM restaurant_order_items
WHERE id = $1
`

func (q *Queries) DeleteRestaurantOrderItem(ctx context.Context, id int32) error {
	_, err := q.db.Exec(ctx, deleteRestaurantOrderItem, id)
	return err
}

const getRestaurantOrderItem = `-- name: GetRestaurantOrderItem :one

SELECT id, order_id, menu_item_id, quantity, unit_price, modifiers_snapshot, modifiers_total, discount_amount, tax_amount, subtotal, line_number, notes, status, metadata, created_at, updated_at FROM restaurant_order_items
WHERE id = $1 LIMIT 1
`

// restaurant_order_items.sql
func (q *Queries) GetRestaurantOrderItem(ctx context.Context, id int32) (RestaurantOrderItem, error) {
	row := q.db.QueryRow(ctx, getRestaurantOrderItem, id)
	var i RestaurantOrderItem
	err := row.Scan(
		&i.ID,
		&i.OrderID,
		&i.MenuItemID,
		&i.Quantity,
		&i.UnitPrice,
		&i.ModifiersSnapshot,
		&i.ModifiersTotal,
		&i.DiscountAmount,
		&i.TaxAmount,
		&i.Subtotal,
		&i.LineNumber,
		&i.Notes,
		&i.Status,
		&i.Metadata,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const listRestaurantOrderItems = `-- name: ListRestaurantOrderItems :many
SELECT id, order_id, menu_item_id, quantity, unit_price, modifiers_snapshot, modifiers_total, discount_amount, tax_amount, subtotal, line_number, notes, status, metadata, created_at, updated_at FROM restaurant_order_items
WHERE order_id = $1
ORDER BY line_number
`

func (q *Queries) ListRestaurantOrderItems(ctx context.Context, orderID int32) ([]RestaurantOrderItem, error) {
	rows, err := q.db.Query(ctx, listRestaurantOrderItems, orderID)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []RestaurantOrderItem
	for rows.Next() {
		var i RestaurantOrderItem
		if err := rows.Scan(
			&i.ID,
			&i.OrderID,
			&i.MenuItemID,
			&i.Quantity,
			&i.UnitPrice,
			&i.ModifiersSnapshot,
			&i.ModifiersTotal,
			&i.DiscountAmount,
			&i.TaxAmount,
			&i.Subtotal,
			&i.LineNumber,
			&i.Notes,
			&i.Status,
			&i.Metadata,
			&i.CreatedAt,
			&i.UpdatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const updateRestaurantOrderItem = `-- name: UpdateRestaurantOrderItem :one
UPDATE restaurant_order_items
SET
    menu_item_id = $2,
    quantity = $3,
    unit_price = $4,
    modifiers_snapshot = $5,
    modifiers_total = $6,
    discount_amount = $7,
    tax_amount = $8,
    subtotal = $9,
    line_number = $10,
    notes = $11,
    status = $12,
    metadata = $13,
    updated_at = CURRENT_TIMESTAMP
WHERE id = $1
RETURNING id, order_id, menu_item_id, quantity, unit_price, modifiers_snapshot, modifiers_total, discount_amount, tax_amount, subtotal, line_number, notes, status, metadata, created_at, updated_at
`

type UpdateRestaurantOrderItemParams struct {
	ID                int32          `json:"id"`
	MenuItemID        int32          `json:"menu_item_id"`
	Quantity          pgtype.Numeric `json:"quantity"`
	UnitPrice         pgtype.Numeric `json:"unit_price"`
	ModifiersSnapshot []byte         `json:"modifiers_snapshot"`
	ModifiersTotal    pgtype.Numeric `json:"modifiers_total"`
	DiscountAmount    pgtype.Numeric `json:"discount_amount"`
	TaxAmount         pgtype.Numeric `json:"tax_amount"`
	Subtotal          pgtype.Numeric `json:"subtotal"`
	LineNumber        pgtype.Int4    `json:"line_number"`
	Notes             pgtype.Text    `json:"notes"`
	Status            pgtype.Text    `json:"status"`
	Metadata          []byte         `json:"metadata"`
}

func (q *Queries) UpdateRestaurantOrderItem(ctx context.Context, arg UpdateRestaurantOrderItemParams) (RestaurantOrderItem, error) {
	row := q.db.QueryRow(ctx, updateRestaurantOrderItem,
		arg.ID,
		arg.MenuItemID,
		arg.Quantity,
		arg.UnitPrice,
		arg.ModifiersSnapshot,
		arg.ModifiersTotal,
		arg.DiscountAmount,
		arg.TaxAmount,
		arg.Subtotal,
		arg.LineNumber,
		arg.Notes,
		arg.Status,
		arg.Metadata,
	)
	var i RestaurantOrderItem
	err := row.Scan(
		&i.ID,
		&i.OrderID,
		&i.MenuItemID,
		&i.Quantity,
		&i.UnitPrice,
		&i.ModifiersSnapshot,
		&i.ModifiersTotal,
		&i.DiscountAmount,
		&i.TaxAmount,
		&i.Subtotal,
		&i.LineNumber,
		&i.Notes,
		&i.Status,
		&i.Metadata,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const updateRestaurantOrderItemStatus = `-- name: UpdateRestaurantOrderItemStatus :one
UPDATE restaurant_order_items
SET
    status = $2,
    updated_at = CURRENT_TIMESTAMP
WHERE id = $1
RETURNING id, order_id, menu_item_id, quantity, unit_price, modifiers_snapshot, modifiers_total, discount_amount, tax_amount, subtotal, line_number, notes, status, metadata, created_at, updated_at
`

type UpdateRestaurantOrderItemStatusParams struct {
	ID     int32       `json:"id"`
	Status pgtype.Text `json:"status"`
}

func (q *Queries) UpdateRestaurantOrderItemStatus(ctx context.Context, arg UpdateRestaurantOrderItemStatusParams) (RestaurantOrderItem, error) {
	row := q.db.QueryRow(ctx, updateRestaurantOrderItemStatus, arg.ID, arg.Status)
	var i RestaurantOrderItem
	err := row.Scan(
		&i.ID,
		&i.OrderID,
		&i.MenuItemID,
		&i.Quantity,
		&i.UnitPrice,
		&i.ModifiersSnapshot,
		&i.ModifiersTotal,
		&i.DiscountAmount,
		&i.TaxAmount,
		&i.Subtotal,
		&i.LineNumber,
		&i.Notes,
		&i.Status,
		&i.Metadata,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}
