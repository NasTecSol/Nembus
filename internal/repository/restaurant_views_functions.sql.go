// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: restaurant_views_functions.sql

package repository

import (
	"context"
)

const getWasteDailySummaryView = `-- name: GetWasteDailySummaryView :many
SELECT store_id, waste_date, waste_source, waste_entries, total_quantity_wasted, total_cost_wasted, avg_cost_per_entry FROM vw_waste_daily_summary
WHERE store_id = $1
ORDER BY waste_date DESC
`

func (q *Queries) GetWasteDailySummaryView(ctx context.Context, storeID int32) ([]VwWasteDailySummary, error) {
	rows, err := q.db.Query(ctx, getWasteDailySummaryView, storeID)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []VwWasteDailySummary
	for rows.Next() {
		var i VwWasteDailySummary
		if err := rows.Scan(
			&i.StoreID,
			&i.WasteDate,
			&i.WasteSource,
			&i.WasteEntries,
			&i.TotalQuantityWasted,
			&i.TotalCostWasted,
			&i.AvgCostPerEntry,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const listActiveRestaurantOrdersView = `-- name: ListActiveRestaurantOrdersView :many

SELECT order_id, order_number, store_id, order_source, order_status, subtotal, tax_amount, total_amount, notes, ordered_at, confirmed_at, table_id, table_number, table_name, table_section, cashier_id, waiter_name, customer_id, customer_name, minutes_since_ordered FROM vw_active_restaurant_orders
WHERE store_id = $1
ORDER BY ordered_at
`

// restaurant_views_functions.sql
func (q *Queries) ListActiveRestaurantOrdersView(ctx context.Context, storeID int32) ([]VwActiveRestaurantOrder, error) {
	rows, err := q.db.Query(ctx, listActiveRestaurantOrdersView, storeID)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []VwActiveRestaurantOrder
	for rows.Next() {
		var i VwActiveRestaurantOrder
		if err := rows.Scan(
			&i.OrderID,
			&i.OrderNumber,
			&i.StoreID,
			&i.OrderSource,
			&i.OrderStatus,
			&i.Subtotal,
			&i.TaxAmount,
			&i.TotalAmount,
			&i.Notes,
			&i.OrderedAt,
			&i.ConfirmedAt,
			&i.TableID,
			&i.TableNumber,
			&i.TableName,
			&i.TableSection,
			&i.CashierID,
			&i.WaiterName,
			&i.CustomerID,
			&i.CustomerName,
			&i.MinutesSinceOrdered,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const listRecipeBomView = `-- name: ListRecipeBomView :many
SELECT recipe_id, recipe_code, recipe_name, yield_quantity, organization_id, ingredient_line_id, line_number, ingredient_qty, is_optional, is_byproduct, product_id, sku, product_name, variant_id, variant_name, uom_id, uom_code, uom_name, unit_cost_estimate, line_cost_estimate FROM vw_recipe_bom
WHERE recipe_id = $1
ORDER BY line_number
`

func (q *Queries) ListRecipeBomView(ctx context.Context, recipeID int32) ([]VwRecipeBom, error) {
	rows, err := q.db.Query(ctx, listRecipeBomView, recipeID)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []VwRecipeBom
	for rows.Next() {
		var i VwRecipeBom
		if err := rows.Scan(
			&i.RecipeID,
			&i.RecipeCode,
			&i.RecipeName,
			&i.YieldQuantity,
			&i.OrganizationID,
			&i.IngredientLineID,
			&i.LineNumber,
			&i.IngredientQty,
			&i.IsOptional,
			&i.IsByproduct,
			&i.ProductID,
			&i.Sku,
			&i.ProductName,
			&i.VariantID,
			&i.VariantName,
			&i.UomID,
			&i.UomCode,
			&i.UomName,
			&i.UnitCostEstimate,
			&i.LineCostEstimate,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const listRestaurantMenuView = `-- name: ListRestaurantMenuView :many
SELECT menu_item_id, store_id, item_name, short_name, description, image_url, base_price, cost_price, preparation_time_min, is_available, is_active, display_order, item_metadata, category_id, category_name, category_code, parent_category_id, category_display_order, category_image_url, parent_category_name, tax_category_id, tax_rate, tax_is_inclusive, recipe_id, recipe_name, recipe_yield, product_id, product_sku, active_modifier_count, margin_percent FROM vw_restaurant_menu
WHERE store_id = $1
ORDER BY category_display_order, display_order
`

func (q *Queries) ListRestaurantMenuView(ctx context.Context, storeID int32) ([]VwRestaurantMenu, error) {
	rows, err := q.db.Query(ctx, listRestaurantMenuView, storeID)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []VwRestaurantMenu
	for rows.Next() {
		var i VwRestaurantMenu
		if err := rows.Scan(
			&i.MenuItemID,
			&i.StoreID,
			&i.ItemName,
			&i.ShortName,
			&i.Description,
			&i.ImageUrl,
			&i.BasePrice,
			&i.CostPrice,
			&i.PreparationTimeMin,
			&i.IsAvailable,
			&i.IsActive,
			&i.DisplayOrder,
			&i.ItemMetadata,
			&i.CategoryID,
			&i.CategoryName,
			&i.CategoryCode,
			&i.ParentCategoryID,
			&i.CategoryDisplayOrder,
			&i.CategoryImageUrl,
			&i.ParentCategoryName,
			&i.TaxCategoryID,
			&i.TaxRate,
			&i.TaxIsInclusive,
			&i.RecipeID,
			&i.RecipeName,
			&i.RecipeYield,
			&i.ProductID,
			&i.ProductSku,
			&i.ActiveModifierCount,
			&i.MarginPercent,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}
