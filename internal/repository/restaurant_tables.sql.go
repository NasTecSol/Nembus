// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: restaurant_tables.sql

package repository

import (
	"context"

	"github.com/jackc/pgx/v5/pgtype"
)

const createRestaurantTable = `-- name: CreateRestaurantTable :one
INSERT INTO restaurant_tables (
    store_id, table_number, table_name, section, capacity, is_active, metadata
) VALUES (
    $1, $2, $3, $4, $5, $6, $7
)
RETURNING id, store_id, table_number, table_name, section, capacity, is_active, metadata, created_at, updated_at
`

type CreateRestaurantTableParams struct {
	StoreID     int32       `json:"store_id"`
	TableNumber string      `json:"table_number"`
	TableName   pgtype.Text `json:"table_name"`
	Section     pgtype.Text `json:"section"`
	Capacity    pgtype.Int4 `json:"capacity"`
	IsActive    pgtype.Bool `json:"is_active"`
	Metadata    []byte      `json:"metadata"`
}

func (q *Queries) CreateRestaurantTable(ctx context.Context, arg CreateRestaurantTableParams) (RestaurantTable, error) {
	row := q.db.QueryRow(ctx, createRestaurantTable,
		arg.StoreID,
		arg.TableNumber,
		arg.TableName,
		arg.Section,
		arg.Capacity,
		arg.IsActive,
		arg.Metadata,
	)
	var i RestaurantTable
	err := row.Scan(
		&i.ID,
		&i.StoreID,
		&i.TableNumber,
		&i.TableName,
		&i.Section,
		&i.Capacity,
		&i.IsActive,
		&i.Metadata,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const deleteRestaurantTable = `-- name: DeleteRestaurantTable :exec
DELETE FROM restaurant_tables
WHERE id = $1
`

func (q *Queries) DeleteRestaurantTable(ctx context.Context, id int32) error {
	_, err := q.db.Exec(ctx, deleteRestaurantTable, id)
	return err
}

const getRestaurantTable = `-- name: GetRestaurantTable :one

SELECT id, store_id, table_number, table_name, section, capacity, is_active, metadata, created_at, updated_at FROM restaurant_tables
WHERE id = $1 LIMIT 1
`

// restaurant_tables.sql
func (q *Queries) GetRestaurantTable(ctx context.Context, id int32) (RestaurantTable, error) {
	row := q.db.QueryRow(ctx, getRestaurantTable, id)
	var i RestaurantTable
	err := row.Scan(
		&i.ID,
		&i.StoreID,
		&i.TableNumber,
		&i.TableName,
		&i.Section,
		&i.Capacity,
		&i.IsActive,
		&i.Metadata,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const listRestaurantTables = `-- name: ListRestaurantTables :many
SELECT id, store_id, table_number, table_name, section, capacity, is_active, metadata, created_at, updated_at FROM restaurant_tables
WHERE store_id = $1
ORDER BY table_number
`

func (q *Queries) ListRestaurantTables(ctx context.Context, storeID int32) ([]RestaurantTable, error) {
	rows, err := q.db.Query(ctx, listRestaurantTables, storeID)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []RestaurantTable
	for rows.Next() {
		var i RestaurantTable
		if err := rows.Scan(
			&i.ID,
			&i.StoreID,
			&i.TableNumber,
			&i.TableName,
			&i.Section,
			&i.Capacity,
			&i.IsActive,
			&i.Metadata,
			&i.CreatedAt,
			&i.UpdatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const updateRestaurantTable = `-- name: UpdateRestaurantTable :one
UPDATE restaurant_tables
SET
    table_number = $2,
    table_name = $3,
    section = $4,
    capacity = $5,
    is_active = $6,
    metadata = $7,
    updated_at = CURRENT_TIMESTAMP
WHERE id = $1
RETURNING id, store_id, table_number, table_name, section, capacity, is_active, metadata, created_at, updated_at
`

type UpdateRestaurantTableParams struct {
	ID          int32       `json:"id"`
	TableNumber string      `json:"table_number"`
	TableName   pgtype.Text `json:"table_name"`
	Section     pgtype.Text `json:"section"`
	Capacity    pgtype.Int4 `json:"capacity"`
	IsActive    pgtype.Bool `json:"is_active"`
	Metadata    []byte      `json:"metadata"`
}

func (q *Queries) UpdateRestaurantTable(ctx context.Context, arg UpdateRestaurantTableParams) (RestaurantTable, error) {
	row := q.db.QueryRow(ctx, updateRestaurantTable,
		arg.ID,
		arg.TableNumber,
		arg.TableName,
		arg.Section,
		arg.Capacity,
		arg.IsActive,
		arg.Metadata,
	)
	var i RestaurantTable
	err := row.Scan(
		&i.ID,
		&i.StoreID,
		&i.TableNumber,
		&i.TableName,
		&i.Section,
		&i.Capacity,
		&i.IsActive,
		&i.Metadata,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}
